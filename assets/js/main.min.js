function listenForWaitingServiceWorker(e,n){function r(){e.installing.addEventListener("statechange",function(){"installed"===this.state&&n(e)})}if(e){if(e.waiting)return n(e);e.installing&&r(),e.addEventListener("updatefound",r)}}var refreshing;function promptUserToRefresh(e){window.confirm("Updates are available!\nClick OK to refresh")&&e.waiting.postMessage("skipWaiting")}"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js").then(function(e){listenForWaitingServiceWorker(e,promptUserToRefresh)}).catch(function(e){console.error("Error during service worker registration: ",e)})}),navigator.serviceWorker.addEventListener("controllerchange",function(){refreshing||(refreshing=!0,window.location.reload(!0))}),$(function(){var e=function(e){!e;var n=e?"block":"none";$("#search-content").val(""),$(".search-tool").css("display",n)};$("#close-btn").click(function(){e(!1)}),$("#search-btn").click(function(){e(!0)}),$.getJSON("/search.json").done(function(e){0==e.code&&$("#search-content").typeahead({source:e.data,displayText:function(e){return e.title},afterSelect:function(e){window.location.href=e.url}})})});