function listenForWaitingServiceWorker(e,n){function r(){e.installing.addEventListener("statechange",function(){"installed"===this.state&&n(e)})}if(e)return e.waiting?n(e):void(e.installing?r():e.addEventListener("updatefound",r))}var refreshing;function promptUserToRefresh(e){e.waiting.postMessage("skipWaiting")}"serviceWorker"in navigator?window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js").then(function(e){listenForWaitingServiceWorker(e,promptUserToRefresh)}).catch(function(e){console.error("[SW] Error during service worker registration: ",e)})}):console.log("Ahh! Your browser does not support Service Workers"),navigator.serviceWorker.addEventListener("controllerchange",function(){refreshing||(refreshing=!0,window.location.reload(!0))}),$("#contact-form").submit(function(e){e.preventDefault();var n=$(this);$.get("https://ipinfo.io","jsonp").always(function(e){var r=n.serialize()+"&"+$.param(e);$.post(n.attr("action"),r).done(function(){n.prepend("<div id='submit-successful' style='color:green; margin:auto;'>Your response has been recorded!</div>"),n.reset();var e=$("#submit-successful");setTimeout(function(){e.length>0&&e.remove()},1e4)}).fail(function(){n.prepend("<div id='submit-failed' style='color:red; margin:auto;'>There was an error sending this form. Please try again after some time.</div>")})})}),$(function(){var e=function(e){!e;var n=e?"block":"none";$("#search-content").val(""),$(".search-tool").css("display",n)};$("#close-btn").click(function(){e(!1)}),$("#search-btn").click(function(){e(!0)}),$.getJSON("/search.json").done(function(e){0==e.code&&$("#search-content").typeahead({source:e.data,displayText:function(e){return e.title},afterSelect:function(e){window.location.href=e.url}})})});